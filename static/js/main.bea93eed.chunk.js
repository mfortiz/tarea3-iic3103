(this["webpackJsonpleaflet-react-demo"]=this["webpackJsonpleaflet-react-demo"]||[]).push([[0],{24:function(e,t,n){},52:function(e,t,n){e.exports=n.p+"static/media/avion.4dc849bc.svg"},56:function(e,t,n){e.exports=n(96)},61:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),l=n.n(c),o=(n(61),n(6)),i=n(3),u=(n(24),n(21)),s=n(17),m=n(19),f=Object(m.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),b=function(e){var t=e.name,n=function(){var e=new Date;arguments.length>0&&(e=new Date(arguments.length<=0?void 0:arguments[0]));var t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear(),r=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0"),l=String(e.getSeconds()).padStart(2,"0");return e=t+"/"+n+"/"+a+" - "+r+":"+c+":"+l},c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],u=l[1],m=Object(a.useState)([]),b=Object(o.a)(m,2),E=b[0],d=b[1];Object(a.useEffect)((function(){return f.on("CHAT",(function(e){d([].concat(Object(s.a)(E),[e]))})),function(){f.off()}}),[E]);var g=Object(a.useRef)(null);Object(a.useEffect)((function(){g.current.scrollIntoView({behavior:"smooth"})}));return r.a.createElement("div",{className:"contenedorChat"},r.a.createElement("div",{className:"chat"},E.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement("b",null,e.name," "),"(",n(e.date),"): "),r.a.createElement("div",null,e.message))})),r.a.createElement("div",{ref:g})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:t,message:i,date:n()};f.emit("CHAT",a),u("")}},r.a.createElement("br",null),r.a.createElement("textarea",{className:"mensaje",value:i,placeholder:"Mensaje",onChange:function(e){u(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{align:"center"},"Enviar mensaje")))},E=(n(50),Object(m.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"})),d=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),i=Object(o.a)(l,2),u=i[0],m=i[1],f=Object(a.useState)(!1),b=Object(o.a)(f,2),d=b[0],g=b[1];E.emit("FLIGHTS"),Object(a.useEffect)((function(){return E.on("FLIGHTS",(function(e){d||(e.forEach((function(e){c((function(t){return[].concat(Object(s.a)(t),[[e.origin,e.destination,e.code]])})),m((function(t){return[].concat(Object(s.a)(t),[e])}))})),g(!0))})),function(){E.off()}}));return r.a.createElement("div",{id:"idmapa"},r.a.createElement("div",{className:"vuelos"},u.map((function(e){return r.a.createElement("div",{className:"vuelosInfo"},r.a.createElement("h3",null,"Vuelo ",e.code),r.a.createElement("b",null,"Origen:")," (",function(e){var t;return n.forEach((function(n){n[2]===e&&(t=n[0][0].toPrecision(6))})),t}(e.code),", ",function(e){var t;return n.forEach((function(n){n[2]===e&&(t=n[0][1].toPrecision(6))})),t}(e.code),")",r.a.createElement("br",null),r.a.createElement("b",null,"Destino:")," (",e.destination[0].toPrecision(6),", ",e.destination[1].toPrecision(6),")",r.a.createElement("br",null),r.a.createElement("b",null,"Aerol\xednea:")," ",e.airline,r.a.createElement("br",null),r.a.createElement("b",null,"Avi\xf3n:")," ",e.plane,r.a.createElement("br",null),r.a.createElement("b",null,"N\xba de asientos:")," ",e.seats,r.a.createElement("br",null),r.a.createElement("b",null,"Pasajeros: ")," ",e.passengers.map((function(e,t){return r.a.createElement("ul",{id:"ulId",key:t.toString()},"\u2022 ",e.name," (",e.age," a\xf1os)")})))}))))},g=n(100),p=n(101),h=n(97),v=n(98),j=n(102),O=n(99),S=n(52),w=n.n(S),x=Object(m.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),I=new i.Icon({iconUrl:w.a,iconSize:[25,25]}),N=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),i=Object(o.a)(l,2),u=i[0],m=i[1],f=Object(a.useState)([]),b=Object(o.a)(f,2),E=b[0],d=b[1],S=Object(a.useState)(!1),w=Object(o.a)(S,2),N=w[0],k=w[1];return x.emit("FLIGHTS"),Object(a.useEffect)((function(){return x.on("FLIGHTS",(function(e){N||(e.forEach((function(e){c((function(t){return[].concat(Object(s.a)(t),[[e.origin,e.destination,e.code]])})),m((function(t){return[].concat(Object(s.a)(t),[e])}))})),k(!0))})),function(){x.off()}})),Object(a.useEffect)((function(){return x.on("POSITION",(function(e){d((function(t){return[].concat(Object(s.a)(t),[e])})),u.forEach((function(t){t.code===e.code&&(t.origin=e.position,m(u))}))})),function(){x.off()}})),r.a.createElement("div",{id:"idmapa"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a,{center:[15,0],zoom:2,style:{height:"60vh"}},r.a.createElement(p.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),E.map((function(e){return r.a.createElement(h.a,{center:e.position,color:"purple",radius:1})})),u.map((function(e){return r.a.createElement(v.a,{position:e.origin,icon:I},r.a.createElement(j.a,null,r.a.createElement("b",null,"Vuelo:")," ",e.code))})),n.map((function(e){return r.a.createElement(h.a,{center:e[0],color:"orange",radius:1.5})})),n.map((function(e){return r.a.createElement(h.a,{center:e[1],color:"black",radius:1.5})})),n.map((function(e){return r.a.createElement(O.a,{positions:[e[0],e[1]]})})),";"))};new i.Icon({iconUrl:"/avion.svg",iconSize:[25,25]});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement((function(){var e=r.a.useState(null),t=Object(o.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),c=Object(o.a)(n,2),l=c[0],i=c[1],s=Object(a.useState)(!1),m=Object(o.a)(s,2),f=m[0],E=m[1];return r.a.createElement(u.b,{sx:{flexDirection:"column",minHeight:"100vh"}},r.a.createElement(u.b,{sx:{flex:1,flexDirection:["column","row"]}},r.a.createElement(u.a,{sx:{flex:1,minWidth:0}},r.a.createElement("br",null),r.a.createElement("h1",{align:"center"},'Mapa "en vivo"'),r.a.createElement(N,null)),r.a.createElement(u.a,{sx:{flexBasis:["auto",300],order:-1}},r.a.createElement("div",{className:"render-chat"},r.a.createElement("h1",{align:"center"},"Informaci\xf3n"),r.a.createElement(d,null))),r.a.createElement(u.a,{sx:{flexBasis:["auto",400]}},r.a.createElement("div",{className:"render-chat"},r.a.createElement("h1",{align:"center"},"Chat"),r.a.createElement("div",{className:"wrapper"},!f&&r.a.createElement("form",{className:"chatContainer",onSubmit:function(e){e.preventDefault(),""!==l&&E(!0)}},r.a.createElement("label",null,"Usuario"),r.a.createElement("br",null),r.a.createElement("input",{className:"inputName",value:l,onChange:function(e){return i(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",null,"Ir al chat")),f&&r.a.createElement(b,{name:l}))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.bea93eed.chunk.js.map